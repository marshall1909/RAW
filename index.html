<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RAW</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" type="image/png" href="./icons/icon_square.svg">
    <link rel="apple-touch-icon" href="./icons/icon_128.png">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="RAW">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f0f12">
</head>

<body>

    <div id="splash-screen">
        <div class="impact-container">
            <img src="./icons/icon_square.svg" id="splash-logo-svg" alt="RAW">
            <div class="sparks"></div>
            <div class="loader-container">
                <div class="loader-bar"></div>
            </div>
        </div>
    </div>

    <header id="main-app-header" class="is-dashboard">
        <div class="header-top">
            <img src="./logo/RAW/RAW_txt.svg" alt="Logo" class="app-logo logo-animate-out">
        </div>

        <div id="header-clock-container" class="header-clock-container">
            <span class="clock-label">UHRZEIT</span>
            <div id="header-clock" class="header-clock">00:00</div>
        </div>

        <div id="session-info-center" class="header-info dashboard-mode">
            <div id="active-workout-display" class="session-details dashboard-mode hidden">
                <span id="active-session-name" class="session-title">BEASTMODE ACTIVE</span>
                <span id="active-session-timer" class="timer-display">00:00</span>
            </div>

            <div id="idle-workout-display" class="session-details">
                <span class="idle-title">STAY FOCUSED.</span>
                <span class="idle-subtitle">LIFT HEAVY.</span>
            </div>
        </div>

        <div class="header-actions">
            <button id="start-session-btn" class="play-stop-btn-container">
                <div class="play-icon"></div>
            </button>

            <button id="end-session-btn" class="play-stop-btn-container hidden">
                <div class="stop-icon"></div>
            </button>
        </div>
    </header>

    <nav id="workout-nav" class="top-nav hidden">
        <button class="tab-btn active" data-tab="push">Push</button>
        <div class="divider"></div>
        <button class="tab-btn" data-tab="pull">Pull</button>
        <div class="divider"></div>
        <button class="tab-btn" data-tab="legs">Beine</button>
    </nav>

    <div id="filter-bar-wrapper" class="filter-controls-wrapper hidden">
        <div id="equipment-filter-bar" class="filter-bar">
            <button class="filter-chip active" data-filter="all">
                <i class="fa-solid fa-grip"></i>
            </button>

            <button class="filter-chip" data-filter="machine">
                <img src="svg_icons/machine.svg" class="eq-svg-icon-filter" alt="Maschine">
            </button>

            <button class="filter-chip" data-filter="barbell">
                <i class="fa-solid fa-dumbbell"></i>
            </button>

            <button class="filter-chip" data-filter="cable">
                <img src="svg_icons/cable.svg" class="eq-svg-icon-filter" alt="Seilzug">
            </button>

            <button class="filter-chip" data-filter="bodyweight">
                <i class="fa-solid fa-person"></i>
            </button>
        </div>
    </div>



    <main id="main-content-area">

        <!------------- DASHBOARD ------------->

        <section id="content-dashboard" class="tab-content">

            <div class="dashboard-title">
                <img src="./logo/RAW/RAW.svg" alt="Logo" class="dashboard-logo">

            </div>

            <div class="dashboard-grid">
                <!-- sessions -->
                <div class="card-template card-accent-left border-accent stat-card sessions">
                    <span class="stat-label">Workouts</span>
                    <div class="stat-value" id="dash-session-count">--</div>
                    <div class="stat-meta">diesen Monat</div>
                </div>
                <!-- strength -->
                <div class="card-template card-accent-left border-accent stat-card strength">
                    <span class="stat-label">Top Satz Bank</span>
                    <div class="stat-value" id="dash-bench-pr">0<span class="unit">kg</span></div>
                    <div class="stat-meta">0 Reps</div>
                </div>
                <!-- body -->
                <div class="card-template card-accent-left border-accent stat-card body">
                    <span class="stat-label">Gewicht</span>
                    <div class="stat-value" id="dash-weight">0<span class="unit">kg</span></div>
                    <div class="stat-meta" id="dash-weight-date">Stand: 10.01.</div>
                </div>
                <!-- volume -->
                <div class="card-template card-accent-left border-accent stat-card volume">
                    <span class="stat-label">Gesamtmasse</span>
                    <div class="stat-value" id="dash-total-volume">0<span class="unit">t</span></div>
                    <div class="stat-meta" id="dash-total-volume-kg">bewegt</div>
                </div>
            </div>

            <!-- achievements -->

            <div class="achievement-shortcut card-template" onclick="showMainContent('achievements')">
                <div class="shortcut-content">
                    <i class="fa-solid fa-medal"></i>
                    <span>Deine Erfolge</span>
                </div>
                <div class="shortcut-stats">
                    <span id="dash-achievements-count">0/0</span>                    
                </div>
            </div>
        </section>



        <!------------- EXERCISES ------------->

        <section id="content-exercises" class="tab-content hidden">
            <div id="workout-category-container">
                <section id="content-push" class="sub-tab-grid">

                    <div class="sub-group">
                        <div class="sub-group-header accordion-header">
                            <h3>Brust</h3>
                            <i class="fa-solid fa-chevron-down accordion-chevron"></i>
                        </div>
                        <div id="grid-brust" class="button-grid"></div>
                    </div>

                    <div class="sub-group">
                        <div class="sub-group-header accordion-header">
                            <h3>Schultern</h3>
                            <i class="fa-solid fa-chevron-down accordion-chevron"></i>
                        </div>
                        <div id="grid-schultern" class="button-grid"></div>
                    </div>

                    <div class="sub-group">
                        <div class="sub-group-header accordion-header">
                            <h3>Trizeps</h3>
                            <i class="fa-solid fa-chevron-down accordion-chevron"></i>
                        </div>
                        <div id="grid-trizeps" class="button-grid"></div>
                    </div>

                </section>

                <section id="content-pull" class="sub-tab-grid hidden">
                    <div class="sub-group">
                        <div class="sub-group-header accordion-header">
                            <h3>Rücken</h3>
                            <i class="fa-solid fa-chevron-down accordion-chevron"></i>
                        </div>
                        <div id="grid-ruecken" class="button-grid"></div>
                    </div>
                    <div class="sub-group">
                        <div class="sub-group-header accordion-header">
                            <h3>Bizeps</h3>
                            <i class="fa-solid fa-chevron-down accordion-chevron"></i>
                        </div>
                        <div id="grid-bizeps" class="button-grid"></div>
                    </div>
                </section>

                <section id="content-legs" class="sub-tab-grid hidden">
                    <div class="sub-group">
                        <div class="sub-group-header accordion-header">
                            <h3>Beine</h3>
                            <i class="fa-solid fa-chevron-down accordion-chevron"></i>
                        </div>
                        <div id="grid-legs" class="button-grid"></div>
                    </div>
                </section>

            </div>
        </section>

        <!------------- BODYSTATS ------------->

        <section id="content-body" class="tab-content hidden">
            <div class="stats-card">
                <h3>Körperwerte loggen</h3>
                <div class="stats-grid">
                    <div class="input-group">
                        <label>Gewicht (kg)</label>
                        <input type="number" id="stats-weight" step="0.1" placeholder="0">
                    </div>
                    <div class="input-group">
                        <label>Taille (cm)</label>
                        <input type="number" id="stats-taille" step="0.1" placeholder="0">
                    </div>
                    <div class="input-group">
                        <label>Bauch (cm)</label>
                        <input type="number" id="stats-bauch" step="0.1" placeholder="0">
                    </div>
                    <div class="input-group">
                        <label>Brust (cm)</label>
                        <input type="number" id="stats-brust" step="0.1" placeholder="0">
                    </div>
                    <div class="input-group">
                        <label>Arm (cm)</label>
                        <input type="number" id="stats-arm" step="0.1" placeholder="0">
                    </div>
                    <div class="input-group">
                        <label>Bein (cm)</label>
                        <input type="number" id="stats-bein" step="0.1" placeholder="0">
                    </div>
                </div>
                <button id="save-stats-btn" class="save-cta">WERTE SPEICHERN</button>
            </div>

            <div class="stats-history">
                <h3>Letzte Werte</h3>
                <div id="stats-history-list"></div>
            </div>
        </section>

        <!------------- WORKOUT HISTORY ------------->

        <section id="content-history" class="tab-content hidden">
            <div class="workout-swipe-card">
                <div class="history-section-header">
                    <h3>Letzte Trainings</h3>
                    <button id="btn-export-all-history" class="global-export-btn" title="Alle Trainings exportieren">
                        <i class="fa-solid fa-file-zipper"></i> </button>
                </div>

                <div id="workout-history-list">
                    <p style="color:#666;">Noch keine Trainings aufgezeichnet.</p>
                </div>
            </div>
        </section>

        <!------------- SETTINGS ------------->

        <section id="content-settings" class="tab-content hidden">
            <div class="settings-grid">
                <h3>Einstellungen</h3>
                <div id="profile-settings" class="card-template card-accent-left border-accent settings-card profil">
                    <i class="fa-solid fa-user user-icon"></i>
                    <span class="settings-label">Profil</span>
                </div>
                <div id="backup-settings" class="card-template card-accent-left border-accent settings-card backup">
                    <i class="fa-solid fa-download download"></i>
                    <span class="settings-label">Backup & Import</span>
                </div>
                <div id="statistics-settings"
                    class="card-template card-accent-left border-accent settings-card statistics">
                    <i class="fa-solid fa-chart-line"></i>
                    <span class="settings-label">Statistik</span>
                </div>
                <div id="body-stats-settings"
                    class="card-template card-accent-left border-accent settings-card body-stats">
                    <i class="fa-solid fa-weight-scale"></i>
                    <span class="settings-label">Körperdaten</span>
                </div>
                <div id="achievements-settings"
                    class="card-template card-accent-left border-accent settings-card achievements">
                    <i class="fa-solid fa-trophy"></i>
                    <span class="settings-label">Achievements</span>
                </div>
            </div>
        </section>


        <!------------- STATISTIK ------------->

        <section id="content-statistics" class="main-section hidden">
            <div class="statistics-section-header">
                <h2 class="section-title">Power-Statistik</h2>
                <p class="section-subtitle">Deine bewegte Gesamtmasse</p>
            </div>

            <div class="total-volume-hero">
                <div class="hero-label">Gesamtmasse</div>
                <div class="hero-value" id="stats-grand-total">0<span class="unit">t</span></div>
            </div>

            <div class="statistics-grid">
                <div class="stat-group-card push-accent">
                    <div class="group-header">
                        <span>PUSH</span>
                    </div>
                    <div class="group-value" id="stats-push-total">0 kg</div>
                    <div class="sub-list" id="stats-push-subs"></div>
                </div>

                <div class="stat-group-card pull-accent">
                    <div class="group-header">
                        <span>PULL</span>
                    </div>
                    <div class="group-value" id="stats-pull-total">0 kg</div>
                    <div class="sub-list" id="stats-pull-subs"></div>
                </div>

                <div class="stat-group-card legs-accent">
                    <div class="group-header">
                        <span>BEINE</span>
                    </div>
                    <div class="group-value" id="stats-legs-total">0 kg</div>
                    <div class="sub-list" id="stats-legs-subs"></div>
                </div>
            </div>
        </section>

        <!------------- ACHIEVEMENTS ------------->

        <section id="content-achievements" class="main-section hidden">
            <div class="achievements-section-header">
                <h2 class="section-title">Erfolge</h2>
                <p class="section-subtitle">Deine Meilensteine & Trophäen</p>
            </div>

            <div class="achievements-grid" id="achievements-container">
            </div>
        </section>
    </main>



    <!--------------- EXERCISE OVERLAY --------------->

    <div id="exercise-overlay" class="overlay hidden">
        <div id="drag-handle-container">
            <div class="drag-handle"></div>
        </div>
        <div class="overlay-header">
            <i id="edit-exercise-btn" class="fa-solid fa-gear"></i>
            <div class="header-content-wrapper">
                <div class="title-row">
                    <div id="overlay-exercise-icon" class="exercise-icon-badge"></div>
                    <h2 id="current-exercise-name">Bankdrücken</h2>
                </div>

            </div>
        </div>

        <div class="overlay-body">

            <div class="input-area">
                <div class="input-row">
                    <input type="number" id="weight-input" placeholder="kg" inputmode="decimal">
                    <input type="number" id="reps-input" placeholder="Reps" inputmode="numeric">
                </div>
                <button id="save-set-btn" class="save-cta">SATZ SPEICHERN</button>
            </div>
            <div class="ref-box">
                <p><i class="fa-solid fa-crown"></i>PB:<span id="pb-display">--</span></p>
            </div>

            <button id="cancel-edit-btn" class="hidden">Ändern abbrechen</button>

            <div id="session-sets-log">
                <button id="toggle-sets-btn" class="exercise-accordion-trigger accordion-header">

                    <span class="exercise-accordion-title">
                        Sätze
                        <div class="shimmer-layer"></div>
                    </span>
                    <i class="fa-solid fa-chevron-down accordion-chevron"></i>
                </button>
                <ul id="sets-list"></ul>
            </div>

            <div class="note-input">
                <button id="add-note-btn" class="exercise-accordion-trigger accordion-header">
                    <span class="exercise-accordion-title">Notiz</span>
                    <i class="fa-solid fa-chevron-down accordion-chevron"></i>
                </button>
                <div id="note-input-container">
                    <textarea id="temp-exercise-note" placeholder="Notiz eingeben..." rows="3"></textarea>
                </div>
            </div>

            <div class="note-history">
                <button id="view-notes-btn" class="exercise-accordion-trigger accordion-header">
                    <span class="exercise-accordion-title">Letzte Notizen</span>
                    <i class="fa-solid fa-chevron-down accordion-chevron"></i>
                </button>
                <div id="previous-notes-container">
                    <ul id="previous-notes-list" class="history-notes-list"></ul>
                </div>
            </div>
        </div>
    </div>

    <div id="exercise-picker-overlay" class="picker-overlay" onclick="closeFocusExercisePicker()">
        <div class="picker-sheet" onclick="event.stopPropagation()">
            <div class="picker-header">
                <div class="picker-title">Fokus wählen</div>
                <button class="picker-close" onclick="closeFocusExercisePicker()">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <div id="picker-list" class="picker-list">
            </div>
        </div>
    </div>

    <footer>
        <nav id="main-menu-bar" class="bottom-menu">
            <button class="menu-link active" data-main="dashboard" title="Dashboard">
                <i class="fa-solid fa-house-chimney"></i>
            </button>
            <span class="divider"></span>
            <button class="menu-link" data-main="exercises" title="Übungen">
                <i class="fa-solid fa-dumbbell"></i>
            </button>
            <span class="divider"></span>
            <button class="menu-link" data-main="history" title="Verlauf">
                <i class="fa-solid fa-clock-rotate-left"></i>
            </button>
            <span class="divider"></span>
            <button class="menu-link" data-main="settings" title="Einstellungen">
                <i class="fa-solid fa-gear"></i>
            </button>
        </nav>
        <div class="meta">
            <p class="app-version">beta v0.8.0</p>
            <p class="copyright">&copy; by Marshall</p>
        </div>
    </footer>

    <!------------- DIE MODALS ------------->

    <div id="confirm-modal" class="overlay hidden">
        <div class="modal-card">
            <div class="modal-icon" id="modal-icon">
                <i class="fa-solid fa-triangle-exclamation"></i>
            </div>
            <h3 id="modal-title">Bist du sicher?</h3>
            <p id="modal-message">Diese Übung wird unwiderruflich gelöscht.</p>

            <div class="modal-buttons">
                <button id="modal-cancel-btn" class="modal-btn secondary">Abbrechen</button>
                <button id="modal-confirm-btn" class="modal-btn primary">Löschen</button>
            </div>
        </div>
    </div>

    <div id="input-modal" class="overlay hidden">
        <div class="modal-card">
            <i id="edit-delete-btn" class="fa-solid fa-trash"></i>
            <h3 id="input-modal-title">Neue Übung</h3>

            <input type="text" id="custom-modal-input" class="edit-input-field" placeholder="Name der Übung...">

            <div id="equipment-selection" class="equipment-grid hidden">
                <div class="eq-option active" data-eq="machine">
                    <img src="svg_icons/machine.svg" class="eq-svg-icon-filter" alt="Maschine">
                    <span>Maschine</span>
                </div>
                <div class="eq-option" data-eq="barbell">
                    <i class="fa-solid fa-dumbbell"></i>
                    <span>Hantel</span>
                </div>
                <div class="eq-option" data-eq="cable">
                    <img src="svg_icons/cable.svg" class="eq-svg-icon-filter" alt="Seilzug">
                    <span>Seilzug</span>
                </div>
                <div class="eq-option" data-eq="bodyweight">
                    <i class="fa-solid fa-person"></i>
                    <span>Body</span>
                </div>
            </div>

            <div id="modal-set-inputs" class="hidden" style="display: flex; gap: 10px; margin-bottom: 15px;">
                <input type="number" id="modal-weight-input" class="edit-input-field" placeholder="kg" step="0.5">
                <input type="number" id="modal-reps-input" class="edit-input-field" placeholder="Reps">
            </div>

            <div class="modal-buttons">
                <button id="input-modal-cancel" class="modal-btn secondary">Abbrechen</button>
                <button id="input-modal-confirm" class="modal-btn primary">Speichern</button>
            </div>
        </div>
    </div>

    <div id="format-modal" class="overlay hidden">
        <div class="modal-card">
            <div class="modal-icon">
                <i class="fa-solid fa-file-export"></i>
            </div>
            <h3>Format wählen</h3>
            <p>Wie möchtest du das Training speichern?</p>

            <div class="modal-buttons vertical">
                <button id="format-json-btn" class="modal-btn primary">
                    <i class="fa-solid fa-code"></i> JSON (Backup)
                </button>
                <button id="format-txt-btn" class="modal-btn secondary">
                    <i class="fa-solid fa-file-lines"></i> TXT (Lesbar)
                </button>
                <button id="format-cancel-btn" class="modal-btn ghost">Abbrechen</button>
            </div>
        </div>
    </div>

    <div id="achievement-modal" class="achievement-modal-overlay hidden">
        <div class="achievement-modal-content">
            <button class="achievement-modal-close-btn" onclick="closeAchievementModal()">&times;</button>
            <div id="achievement-modal-body">
            </div>
        </div>
    </div>

    <!------------- FLOATING BUBBLE ------------->

    <div id="rest-timer-container" class="floating-timer hidden">
        <div class="timer-content">
            <i id="resume-icon" class="fa-solid fa-dumbbell hidden"></i>
            <span id="rest-timer">00:00</span>
        </div>
        <span class="rest-label">REST</span>
    </div>

    <script src="script.js"></script>
</body>

</html>